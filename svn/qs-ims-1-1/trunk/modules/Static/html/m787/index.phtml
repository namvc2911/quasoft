<script	type="text/javascript" src="/js/hightchart/highcharts.js"></script>
<script	type="text/javascript" src="/js/hightchart/highcharts-more.js"></script>
<script type="text/javascript">
function changeStatus(){
	$('.meter').each(function(){
		if($(this).find('.number').text() == 'ON'){
			$(this).css('background','green');
		}
		else{
			$(this).css('background','red');
		}
	});
	
}
$(document).ready(function(){

	changeStatus();
});
<!--
$(function () {
<?php foreach ($this->data as $item):?>
	<?php switch ($item->DongHo):
	case 'METER':?>
	    $('#container_<?php echo $item->Ma?>').highcharts({
	
	        chart: {
	            type: 'gauge',
	            plotBackgroundColor: '#fafafb',
	            plotBackgroundImage: null,
	            plotBorderWidth: 0,
	            plotShadow: false
	        },
	        title: {
	            text: ''
	        },
	
	        pane: {
	            startAngle: -150,
	            endAngle: 150,
	            background: [{
	                backgroundColor: {
	                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
	                    stops: [
	                        [0, '#FFF'],
	                        [1, '#333']
	                    ]
	                },
	                borderWidth: 0,
	                outerRadius: '109%'
	            }, {
	                backgroundColor: {
	                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
	                    stops: [
	                        [0, '#333'],
	                        [1, '#FFF']
	                    ]
	                },
	                borderWidth: 1,
	                outerRadius: '107%'
	            }, {
	                // default background
	            }, {
	                backgroundColor: '#DDD',
	                borderWidth: 0,
	                outerRadius: '105%',
	                innerRadius: '103%'
	            }]
	        },
	
	        // the value axis
	        yAxis: {
	            min: <?php echo $item->TuSo?$item->TuSo:0?>,
	            max: <?php echo $item->DenSo?$item->DenSo:100?>,
	
	            minorTickInterval: 'auto',
	            minorTickWidth: 1,
	            minorTickLength: 10,
	            minorTickPosition: 'inside',
	            minorTickColor: '#666',
	
	            tickPixelInterval: 30,
	            tickWidth: 2,
	            tickPosition: 'inside',
	            tickLength: 10,
	            tickColor: '#666',
	            labels: {
	                step: <?php  echo $item->KhoangCach?$item->KhoangCach:1?>,
	                rotation: 'auto'
	            },
	            title: {
	                text: '<?php echo $item->DonViTinh?>'
	            },
	            plotBands: [{
	                from: <?php echo $item->TuSo?$item->TuSo:0?>,
	                to: <?php echo $item->GioiHanDuoi?$item->GioiHanDuoi:0?>,
	                color: '#DF5353' // red
	            }, {
	                from: <?php echo $item->GioiHanDuoi?$item->GioiHanDuoi:0?>,
	                to: <?php echo $item->GioiHanTren?$item->GioiHanTren:0?>,
	                color: '#55BF3B' // yellow
	            }, {
	                from: <?php echo $item->GioiHanTren?$item->GioiHanTren:0?>,
	                to: <?php echo $item->DenSo?$item->DenSo:100?>,
	                color: '#DF5353' // red
	            }]
	        },
	
	        series: [{
	            name: '<?php echo $item->ChiSo?>',
	            data: [<?php echo (int) $item->GiaTri?>],
	            tooltip: {
	                valueSuffix: ' <?php echo $item->DonViTinh?>'
	            }
	        }]
	
	    },
	    // Add some life
	    function (chart) {
           /* setInterval(function () {
                var point = chart.series[0].points[0],
                    newVal,
                    inc = Math.round((Math.random() - 0.5) * 20);

                newVal = point.y + inc;
                if (newVal < 0 || newVal > 200) {
                    newVal = point.y - inc;
                }

                point.update(newVal);

            }, 3000);*/
    	});
		<?php break;?>
		<?php case 'COUNTER':?>
			
		<?php break;?>
		<?php case 'ONOFF':?>
		
		<?php break;?>
	<?php endswitch;?>
<?php endforeach;?>
});
//-->
</script>
<style>
.group{
	float: left;
	
}
.box{
	float: left;
	width: 350px;
	height: 350px;
	border: 1px solid #ccc;
	margin: 20px;
}
.title{
	text-align: center;
	line-height: 40px;
	font-size: 15pt;
}
.counter{
	width: 200px;
	height: 80px;
	border: 20px solid #ccc;
	background: #000;
	text-align: center;
	border-radius: 5px;
	margin:90px auto;
}
.meter{
	width: 100px;
	height: 100px;
	border: 20px solid #000;
	background: green;
	text-align: center;
	border-radius: 50%;
	margin:80px auto;
}
.meter .number{
	font-size: 30pt;
	font-family: sans-serif;
	color: #ccc;
	padding-top:28px;
}
.counter .number{
	font-size: 40pt;
	font-family: sans-serif;
	color: green;
	margin-top: 30px;
}
.counter .name{
	font-size: 20pt;
	color: green;
}
</style>

<!-- PHTML -->
<div class="clear"></div>
<div id="view">
	<div class="group">
	<?php foreach ($this->data as $item):?>
		<?php switch ($item->DongHo):
		case 'METER':?>
			<div class="box">
				<div id="container_<?php echo $item->Ma?>" style="min-width: 250px; max-width: 300px; height: 300px; margin: 0 auto;"></div>
				<div class="title"><?php echo $item->MaThietBi?> <?php if($item->BoPhan):?> - <?php echo $item->BoPhan?><?php endif;?></div>
			</div>
		<?php break;?>
		<?php case 'COUNTER':?>
			<div class="box">
				<div class="counter">
					<span class="number"><?php echo $item->GiaTri?$item->GiaTri:0?></span><span class="name"> <?php echo $item->DonViTinh?></span>
				</div>
				<div class="title"><?php echo $item->MaThietBi?> <?php if($item->BoPhan):?> - <?php echo $item->BoPhan?><?php endif;?></div>
			</div>
		<?php break;?>
		<?php case 'ONOFF':?>
			<div class="box">
				<div class="meter">
					<div class="number"><?php echo $item->GiaTri?'ON':'OFF'?></div>
				</div>
				<div class="title"><?php echo $item->MaThietBi?> <?php if($item->BoPhan):?> - <?php echo $item->BoPhan?><?php endif;?></div>
			</div>
		<?php break;?>
	<?php endswitch;?>
	<?php endforeach;?>
	</div>
</div>
<div id="qss_trace"></div>
